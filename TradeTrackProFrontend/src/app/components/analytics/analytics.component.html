<div class="space-y-8">
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
        <h2 class="text-3xl font-bold text-white">Performance Analytics</h2>

        <div class="flex flex-wrap items-center gap-3 bg-trade-card p-2 rounded-xl border border-gray-800 shadow-lg">
            <div class="flex items-center gap-2">
                <span class="text-gray-400 text-sm pl-2">From:</span>
                <input type="text" id="analyticsStartDate"
                    class="bg-trade-main border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:border-trade-accent placeholder-gray-600"
                    placeholder="Start Date">
            </div>

            <div class="flex items-center gap-2">
                <span class="text-gray-400 text-sm">To:</span>
                <input type="text" id="analyticsEndDate"
                    class="bg-trade-main border border-gray-700 rounded-lg px-3 py-1.5 text-sm text-white focus:outline-none focus:border-trade-accent placeholder-gray-600"
                    placeholder="End Date">
            </div>

            <div class="h-6 w-px bg-gray-700 mx-1"></div>

            <button (click)="applyDateFilter()"
                class="bg-trade-accent hover:bg-blue-600 text-white px-4 py-1.5 rounded-lg text-sm font-bold shadow-lg shadow-blue-500/20 transition-all hover:scale-105">
                Apply Filter
            </button>

            <button (click)="clearFilter()"
                class="text-gray-400 hover:text-white px-3 py-1.5 text-sm font-medium transition-colors">
                Clear
            </button>
        </div>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
        <!-- Total Trades -->
        <div
            class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg hover:shadow-blue-900/10 transition-all hover:-translate-y-1">
            <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2">Total Trades</h3>
            <p class="text-3xl font-bold text-white">{{ totalTrades }}</p>
        </div>

        <!-- Wins -->
        <div
            class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg hover:shadow-emerald-900/10 transition-all hover:-translate-y-1">
            <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2">Wins</h3>
            <p class="text-3xl font-bold text-emerald-400">{{ wins }}</p>
        </div>

        <!-- Losses -->
        <div
            class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg hover:shadow-red-900/10 transition-all hover:-translate-y-1">
            <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2">Losses</h3>
            <p class="text-3xl font-bold text-red-400">{{ losses }}</p>
        </div>

        <!-- Win Rate -->
        <div
            class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg hover:shadow-blue-900/10 transition-all hover:-translate-y-1">
            <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2">Win Rate</h3>
            <p class="text-3xl font-bold text-blue-400">{{ winRate }}%</p>
        </div>

        <!-- Total Profit -->
        <div class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg transition-all hover:-translate-y-1">
            <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2">Net P/L</h3>
            <p [ngClass]="totalProfit >= 0 ? 'text-emerald-400' : 'text-red-400'" class="text-3xl font-bold">
                {{ currency }} {{ totalProfit | number:'1.2-2' }}
            </p>
        </div>
    </div>

    <!-- Monthly Performance Heatmap -->
    <div class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg mb-6">
        <h2 class="text-white font-semibold mb-4 text-xl">Monthly Performance Heatmap</h2>

        <div class="overflow-x-auto">
            <table class="min-w-full text-sm text-center text-gray-300 border-collapse">
                <thead>
                    <tr>
                        <th class="p-3 border border-gray-700 bg-gray-900 text-white font-bold">Year</th>
                        <th *ngFor="let m of months"
                            class="p-3 border border-gray-700 bg-gray-900 text-white font-bold">
                            {{ m }}
                        </th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let year of getYears()">
                        <td class="p-3 border border-gray-700 font-bold text-white bg-gray-800">{{ year }}</td>

                        <td *ngFor="let m of months"
                            class="p-3 border border-gray-700 font-medium transition-all hover:opacity-90 cursor-default"
                            [ngClass]="getHeatmapColor(monthlyData[year][m] || 0)">
                            {{ monthlyData[year][m] ? (monthlyData[year][m] | number:'1.0-0') : '-' }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg">
            <h3 class="text-xl font-bold text-white mb-6">Profit Contribution by Symbol</h3>
            <div class="relative h-64">
                <canvas baseChart [data]="symbolData" [labels]="symbolLabels" [type]="'bar'" [options]="symbolOptions">
                </canvas>
            </div>
        </div>

        <div class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg">
            <h3 class="text-xl font-bold text-white mb-6">Win / Loss Distribution</h3>
            <div class="relative h-64">
                <canvas baseChart [data]="equityData" [labels]="equityLabels" [type]="'pie'" [options]="equityOptions"
                    class="w-full h-64">
                </canvas>
            </div>
        </div>
    </div>

    <!-- Day of Week Chart -->
    <div class="bg-trade-card border border-gray-800 rounded-xl p-6 shadow-lg">
        <h3 class="text-xl font-bold text-white mb-6">Profit by Day of Week</h3>
        <div class="relative h-64">
            <canvas baseChart [data]="dayData" [type]="'bar'" [options]="dayOptions">
            </canvas>
        </div>
    </div>


</div>