<div class="trade-list-container">
  <h2>Your Trades</h2>

  <div class="filters">
    <label>Start Date: <input type="date" [(ngModel)]="startDate" (ngModelChange)="applyFilters()"></label>
    <label>End Date: <input type="date" [(ngModel)]="endDate" (ngModelChange)="applyFilters()"></label>
    <label>Outcome:
      <select [(ngModel)]="selectedOutcome" (ngModelChange)="applyFilters()">
        <option value="All">All</option>
        <option value="WIN">Win</option>
        <option value="LOSS">Loss</option>
        <option value="BREAKEVEN">Breakeven</option>
      </select>
    </label>
    <button (click)="clearFilters()">Clear Filters</button>
  </div>

  <div *ngIf="filteredTrades.length === 0" class="no-trades">
    No trades found.
  </div>

  <div class="trade-grid">
    <div class="trade-card" *ngFor="let trade of paginatedTrades">
      <div class="trade-header">
        <span class="symbol">{{ trade.symbol }}</span>
        <span class="entry-exit">
          {{ trade.entryPrice | number:'1.2-2' }} â†’ {{ trade.exitPrice | number:'1.2-2' }}
        </span>
      </div>

      <div class="trade-details">
        <p><strong>Date:</strong> {{ trade.tradeDate | date:'mediumDate' }}</p>
        <p><strong>Type:</strong> {{ trade.positionType }} ({{ trade.quantity | number:'1.2-2' }} units/lots)</p>
        <p>
          <strong>Profit:</strong>
          <span [ngClass]="{ 'positive': trade.profitLoss > 0, 'negative': trade.profitLoss < 0 }">
            {{ trade.profitLoss | number:'1.2-2' }}
          </span>
        </p>
        <p><strong>Outcome:</strong> {{ trade.outcome }}</p>
        <p class="notes" *ngIf="trade.notes">ğŸ“ {{ trade.notes }}</p>
      </div>

      <div class="actions">
        <button class="edit-btn" (click)="editTrade(trade.id)">Edit</button>
        <button class="delete-btn" (click)="deleteTrade(trade.id!)">Delete</button>
      </div>
    </div>
  </div>

  <div class="pagination" *ngIf="totalPages > 1">
    <button (click)="prevPage()" [disabled]="currentPage === 1">Prev</button>
    <button *ngFor="let page of totalPagesArray" [class.active]="page === currentPage" (click)="goToPage(page)">
      {{ page }}
    </button>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
  </div>
</div>